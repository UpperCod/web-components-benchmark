!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).atomico=t()}(this,function(){"use strict";function e(e,t,n){var r=arguments;if(t=t||{},arguments.length>3){n=[n];for(var o=3;o<arguments.length;o++)n.push(r[o])}null!=n&&(t.children=n);var a={type:e,props:t},i=t.key;return null!=i&&(a.key=""+i),a}function t(t){return null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t?e(null,null,""+t):t}var n=[],r={},o={},a="@state",i="@type",s="host",c=97,l=116,d=79,u=77,p=73,h=67,f={children:1},v={innerHTML:1,textContent:1,contenteditable:1},y={};var m,g,x=Promise.prototype.then.bind(Promise.resolve());function b(e,t,n,o,a,i){if(("checked"==t||"value"==t)&&t in e&&(n=e[t]),o!=n)if("o"!=t[0]||"n"!=t[1]||"function"!=typeof o&&"function"!=typeof n)switch(t){case"ref":o&&(o.current=e);break;case"style":!function(e,t,n){var r=t,o=n;if("object"==typeof o)for(var a in o="",n)n[a]&&(y[a]||(y[a]=a.replace(/([A-Z])/g,"-$1").toLowerCase()),o+=y[a]+":"+n[a]+";");r!=o&&(e.style.cssText=o)}(e,n||e.style.cssText,o);break;case"shadowDom":return void("attachShadow"in e&&(e.shadowRoot&&!o||!e.shadowRoot&&o)&&e.attachShadow({mode:o?"open":"closed"}));case"key":t="data-key",null==o?delete e.dataset.key:e.dataset.key=o;break;case"class":case"className":t=a?"class":"className";default:"list"!=t&&!a&&t in e?e[t]=null==o?"":o:null==o?e.removeAttribute(t):e.setAttribute(t,o)}else!function(e,t,n,o){r[t]||(r[t]=t.slice(2).toLocaleLowerCase()),t=r[t],o.handleEvent||(o.handleEvent=k),n?(o[t]||e.addEventListener(t,o),o[t]=n):o[t]&&(e.removeEventListener(t,o),delete o[t])}(e,t,o,i)}function k(e){return this[e.type](e)}function w(){if(!m)throw new Error("the hooks can only be called from an existing functional component in the diff queue");return m}function D(e,t){e.reducer&&(e.state=e.reducer(e.state,t))}function C(e,t){for(var n=e.length,r=0;r<n;r++){var o=e[r],a=o.hooks,i=a.length;t.type===h&&(o.remove=!0);for(var s=0;s<i;s++)D(a[s],t)}}function N(e,t,n,r){var o=(t[e]||{}).updateComponent,a=t.childNodes,i=a.length;o&&o!=r&&o(n?p:h);for(var s=0;s<i;s++)N(e,a[s])}function A(e,t){var n,r=document;return(n=null!=e?t?r.createElementNS("http://www.w3.org/2000/svg",e):r.createElement(e):r.createTextNode(""))[i]=e,n}function E(e,r,o,a,i){if(void 0===i&&(i=0),o=o||[],a=a||[],Array.isArray(e))for(var s=e.length,c=0;c<s;c++)E(e[c],r,o,a,i+1);else{if(null==e&&!i)return n;var l=r?r(e,a.length):t(e);r||"object"==typeof l&&null!=l.key&&-1==o.indexOf(l.key)&&(o.push(l.key),o.withKeyes=!0),a.push(l)}return a}function L(n,r,c){c=c||a,n=t(n),c==a&&n.type!=s&&(n=e(s,{},n)),function e(n,r,o,a,c,y){var k=r&&r[n]||{},w=k.vnode,D=k.updateComponent,L=k.handlers;if(void 0===L&&(L={}),w==o)return r;w=w||{props:{}};var T=o.type,S=o.props,B=S.shadowDom,j=S.children,z="function"==typeof T;if(c=c||"svg"==T,z&&!D&&(D=function(n,r){var o,a=[];return function i(s,c,f,v){switch(s){case l:return o=c,function s(c,p,f){if(o){if("function"!=typeof(c=t(c)).type)return C(a.splice(f),{type:h}),o=e(n,o,c,p,r,i),void(a.length&&(o[n].updateComponent=i));var v,y,b=a[f]||{};b.type!=c.type&&(C(a.splice(f),{type:h}),a[f]=function e(t,n){var r=arguments;for(var o in n)t[o]=n[o];for(var a=2;a<arguments.length;a++)e(t,r[a]);return t}({hooks:[]},c),v=!0,y=!0);var k=c.props,w=(b=a[f]).props;if(!y){var D=Object.keys(w).length,N=0;for(var A in k)if(N++,k[A]!=w[A]){y=!0;break}y=y||D!=N}y=b.context!=p||y,b.props=k,b.context=p,y&&!b.prevent&&function e(){if(b.remove)return o;var t=m={component:b,context:p,next:function(){b.prevent||(b.prevent=!0,x(function(){b.prevent=!1,e()}))}};g=0,C([b],{type:l});var n=b.type(b.props);m=!1,g=0,s(n,t.context,f+1),C([b],{type:v?d:u}),v=!1}()}}(f,v,0),o;case p:C([].concat(a).reverse(),{type:s});break;case h:o=!1,C(a.reverse(),{type:s}),a=[]}}}(n,c)),!z&&T!=s&&function(e){if(e){if(!e[i]){var t=e.nodeName.toLowerCase();e[i]="#text"==t?null:t}return e[i]}}(r)!==T){var O=A(T,c),R=r&&r.parentNode;R&&(N(n,r,!0,y),R.replaceChild(O,r)),r=O,L={}}return D&&y!=D?D(l,r,o,a):(null==T?r.nodeValue!=j&&(r.nodeValue=j):function(e,t,n,r,o){for(var a in t=t||{})f[a]||a in n||b(e,a,t[a],null,r,o);var i;for(var s in n)f[s]||(b(e,s,t[s],n[s],r,o),i=i||v[s]);return i}(r,w.props,o.props,c,L)||w.props.children==j||function(t,n,r,o,a){for(var i=[],s=E(j,!1,i),c=s.length,l=n.childNodes,d={},u=l.length,p=i.withKeyes,h=p?0:u>c?c:u;h<u;h++){var f=l[h],v=h;p&&i.indexOf(v=f.dataset.key)>-1?d[v]=f:(N(t,f),h--,u--,n.removeChild(f))}for(var y=0;y<c;y++){var m=s[y],g=l[y],x=l[y+1],b=p?d[p?m.key:y]:g;p&&b!=g&&n.insertBefore(b,g);var k=e(t,b||"function"!=typeof m.type?b:A(null),m,o,a);b||(x?n.insertBefore(k,x):n.appendChild(k))}}(n,B&&r.shadowRoot||r,0,a,c),r[n]={vnode:o,handlers:L},r)}(c,r,n,o)}function T(e){var t=w().next,n=function(e,t){var n,r,o=w().component,a=g++;return o.hooks[a]||(r=!0,o.hooks[a]={state:t}),(n=o.hooks[a]).reducer=e,r&&D(n,{type:c}),[n.state,function(e){return D(n,e)}]}(function(t,n){switch(n.type){case c:return"function"==typeof e?e():e;case 159:var r=n.state;return"function"==typeof r?r(t):r}return t}),r=n[1];return[n[0],function(e){r({state:e,type:159}),t()}]}var S=e;let B=Promise.resolve(),j=0,z=S("host");function O(e){return JSON.parse(e)}class R extends HTMLElement{constructor(){let e;super(),this.props={},this.render=this.render.bind(this),this.renderID="@wc."+j++,this.update=(t=>{this.props={...this.props,...t},e||(e=!0,B.then(()=>{e=!1,L(S(this.render,this.props),this,this.renderID)}))}),this.update()}static get observedAttributes(){let e=this.attributes||{},t=[];for(let n in e)t.push(n.replace(/([A-Z])/g,"-$1").toLowerCase());return t}disconnectedCallback(){L(z,this,this.renderID)}attributeChangedCallback(e,t,n){if(t==n)return;e=e.replace(/-(\w)/g,(e,t)=>t.toUpperCase());let r,{attributes:o}=this.constructor,a=o[e];try{switch(a){case Number:n=O(n);break;case Boolean:n=1==(n=""==n||O(n))||0==n?1==n:n;break;case Object:case Array:n=O(n)}}catch(e){r=!0}if(r||{}.toString.call(n)!=`[object ${a.name}]`)throw`the attribute [${e}] must be of the type [${a.name}]`;this.update({[e]:n})}render(){return z}}function $(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var I="input{background:rgba(0,0,0,.003);width:100%;font-size:24px;color:inherit;padding:6px;border:1px solid #ccc;box-shadow:inset 0 -1px 5px 0 rgba(0,0,0,.2);box-sizing:border-box}";$(I);let M=0;function P(e){return S("div",{shadowDom:!0},S("style",null,I),S("form",{onSubmit:t=>{t.preventDefault(),e.onChange&&e.onChange({text:t.target.input.value,id:M++}),t.target.reset()}},S("input",{name:"input",type:"text",placeholder:e.placeholder})))}var H=':host{display:flex}input{text-align:center;border:none;-webkit-appearance:none;appearance:none;padding:.2rem .5rem;outline:none}input:after{content:url(\'data:image/svg+xml;utf8,<svg%20xmlns%3D"http%3A//www.w3.org/2000/svg"%20width%3D"40"%20height%3D"40"%20viewBox%3D"-10%20-18%20100%20135"><circle%20cx%3D"50"%20cy%3D"50"%20r%3D"50"%20fill%3D"none"%20stroke%3D"%23ededed"%20stroke-width%3D"3"/></svg>\')}input:checked:after{content:url(\'data:image/svg+xml;utf8,<svg%20xmlns%3D"http%3A//www.w3.org/2000/svg"%20width%3D"40"%20height%3D"40"%20viewBox%3D"-10%20-18%20100%20135"><circle%20cx%3D"50"%20cy%3D"50"%20r%3D"50"%20fill%3D"none"%20stroke%3D"%23bddad5"%20stroke-width%3D"3"/><path%20fill%3D"%235dc2af"%20d%3D"M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z"/></svg>\')}input:checked~.text{color:#d9d9d9;text-decoration:line-through}.group{display:flex;align-items:center}.text{flex:0%;padding:1rem;font-size:24px;text-align:left}button{color:#cc9a9a;background:none;border:0;font-size:30px;margin-right:1rem}';function K(e){return S("div",{shadowDom:!0,key:e.key},S("style",null,H),S("input",{type:"checkbox",onChange:e.onToggle,checked:e.checked}),S("div",{class:"text"},e.text),S("button",{onClick:e.onRemove},"x"))}$(H);var V=":host{display:block;box-shadow:0 2px 4px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.1);background:#fff}";$(V);class W extends R{render(){let[e,t]=T(()=>[{text:"my initial todo",checked:!1,id:-1>>>0},{text:"Learn about Web Components",checked:!0,id:-2>>>0}]);return S("host",{shadowDom:!0},S("style",null,V),S(P,{placeholder:"What needs to be done?",onChange:n=>{t(e.concat(n))}}),S("div",null,e.map(({text:n,checked:r,id:o},a)=>S(K,{key:o,text:n,checked:r,onRemove:()=>{t(e.filter((e,t)=>t!==a))},onToggle:()=>{t(e.map((e,t)=>t===a?{...e,checked:!e.checked}:e))}}))))}}return customElements.define("atomico-todo",W),W});
//# sourceMappingURL=atomico.umd.js.map
